import t from"antlr4";import e from"fast-deep-equal";var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},i(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var n=function(){return n=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)};function s(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,n,s=i.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(t){n={error:t}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}function l(t,e,i){if(i||2===arguments.length)for(var r,n=0,s=e.length;n<s;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))}var a=function(t){function e(e){var i=t.call(this,e.message)||this;return i.name="CoLangError",i.source=e.source,i.line=e.line,i.column=e.column,i.recognizer=e.recognizer,i.offendingSymbol=e.offendingSymbol,i.e=e.e,i}return r(e,t),e}(Error);const h=(new t.atn.ATNDeserializer).deserialize([4,0,34,243,6,-1,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,2,16,7,16,2,17,7,17,2,18,7,18,2,19,7,19,2,20,7,20,2,21,7,21,2,22,7,22,2,23,7,23,2,24,7,24,2,25,7,25,2,26,7,26,2,27,7,27,2,28,7,28,2,29,7,29,2,30,7,30,2,31,7,31,2,32,7,32,2,33,7,33,2,34,7,34,2,35,7,35,1,0,1,0,1,1,1,1,1,2,1,2,1,3,1,3,1,4,1,4,1,5,1,5,1,6,1,6,1,7,1,7,1,8,1,8,1,8,1,8,1,9,1,9,1,9,1,9,1,9,1,9,1,10,1,10,1,10,1,10,1,10,1,10,1,11,1,11,1,11,1,11,1,11,1,12,1,12,1,12,1,12,1,12,1,12,1,12,1,13,1,13,1,13,1,13,1,13,1,14,1,14,1,14,1,14,1,14,1,14,1,14,1,14,1,14,1,15,1,15,1,15,1,15,1,15,1,15,1,15,1,16,1,16,1,16,1,16,1,16,1,16,1,16,1,16,1,16,1,16,1,16,1,16,1,16,1,16,1,16,1,17,1,17,1,17,1,17,1,17,1,17,1,17,1,17,1,17,1,17,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,18,1,19,1,19,1,19,1,19,1,19,1,20,1,20,1,20,1,20,1,21,1,21,1,22,1,22,1,22,1,23,1,23,1,24,1,24,1,24,1,25,1,25,1,26,1,26,1,27,1,27,1,28,1,28,1,29,3,29,204,8,29,1,29,4,29,207,8,29,11,29,12,29,208,1,30,1,30,1,30,1,30,1,31,1,31,3,31,217,8,31,1,31,1,31,1,32,1,32,3,32,223,8,32,1,32,1,32,1,32,5,32,228,8,32,10,32,12,32,231,9,32,1,33,4,33,234,8,33,11,33,12,33,235,1,33,1,33,1,34,1,34,1,35,1,35,0,0,36,1,1,3,2,5,3,7,4,9,5,11,6,13,7,15,8,17,9,19,10,21,11,23,12,25,13,27,14,29,15,31,16,33,17,35,18,37,19,39,20,41,21,43,22,45,23,47,24,49,25,51,26,53,27,55,28,57,29,59,30,61,31,63,32,65,33,67,34,69,0,71,0,1,0,5,2,0,44,44,59,59,3,0,77,77,100,100,121,121,3,0,9,10,12,13,32,32,2,0,65,90,97,122,1,0,48,57,248,0,1,1,0,0,0,0,3,1,0,0,0,0,5,1,0,0,0,0,7,1,0,0,0,0,9,1,0,0,0,0,11,1,0,0,0,0,13,1,0,0,0,0,15,1,0,0,0,0,17,1,0,0,0,0,19,1,0,0,0,0,21,1,0,0,0,0,23,1,0,0,0,0,25,1,0,0,0,0,27,1,0,0,0,0,29,1,0,0,0,0,31,1,0,0,0,0,33,1,0,0,0,0,35,1,0,0,0,0,37,1,0,0,0,0,39,1,0,0,0,0,41,1,0,0,0,0,43,1,0,0,0,0,45,1,0,0,0,0,47,1,0,0,0,0,49,1,0,0,0,0,51,1,0,0,0,0,53,1,0,0,0,0,55,1,0,0,0,0,57,1,0,0,0,0,59,1,0,0,0,0,61,1,0,0,0,0,63,1,0,0,0,0,65,1,0,0,0,0,67,1,0,0,0,1,73,1,0,0,0,3,75,1,0,0,0,5,77,1,0,0,0,7,79,1,0,0,0,9,81,1,0,0,0,11,83,1,0,0,0,13,85,1,0,0,0,15,87,1,0,0,0,17,89,1,0,0,0,19,93,1,0,0,0,21,99,1,0,0,0,23,105,1,0,0,0,25,110,1,0,0,0,27,117,1,0,0,0,29,122,1,0,0,0,31,131,1,0,0,0,33,138,1,0,0,0,35,153,1,0,0,0,37,163,1,0,0,0,39,175,1,0,0,0,41,180,1,0,0,0,43,184,1,0,0,0,45,186,1,0,0,0,47,189,1,0,0,0,49,191,1,0,0,0,51,194,1,0,0,0,53,196,1,0,0,0,55,198,1,0,0,0,57,200,1,0,0,0,59,203,1,0,0,0,61,210,1,0,0,0,63,216,1,0,0,0,65,222,1,0,0,0,67,233,1,0,0,0,69,239,1,0,0,0,71,241,1,0,0,0,73,74,5,36,0,0,74,2,1,0,0,0,75,76,5,45,0,0,76,4,1,0,0,0,77,78,5,47,0,0,78,6,1,0,0,0,79,80,5,176,0,0,80,8,1,0,0,0,81,82,5,43,0,0,82,10,1,0,0,0,83,84,5,37,0,0,84,12,1,0,0,0,85,86,5,38,0,0,86,14,1,0,0,0,87,88,5,46,0,0,88,16,1,0,0,0,89,90,5,36,0,0,90,91,5,73,0,0,91,92,5,70,0,0,92,18,1,0,0,0,93,94,5,36,0,0,94,95,5,70,0,0,95,96,5,82,0,0,96,97,5,79,0,0,97,98,5,77,0,0,98,20,1,0,0,0,99,100,5,36,0,0,100,101,5,84,0,0,101,102,5,72,0,0,102,103,5,69,0,0,103,104,5,78,0,0,104,22,1,0,0,0,105,106,5,36,0,0,106,107,5,65,0,0,107,108,5,78,0,0,108,109,5,89,0,0,109,24,1,0,0,0,110,111,5,36,0,0,111,112,5,69,0,0,112,113,5,77,0,0,113,114,5,80,0,0,114,115,5,84,0,0,115,116,5,89,0,0,116,26,1,0,0,0,117,118,5,36,0,0,118,119,5,78,0,0,119,120,5,79,0,0,120,121,5,84,0,0,121,28,1,0,0,0,122,123,5,36,0,0,123,124,5,67,0,0,124,125,5,79,0,0,125,126,5,77,0,0,126,127,5,80,0,0,127,128,5,76,0,0,128,129,5,69,0,0,129,130,5,88,0,0,130,30,1,0,0,0,131,132,5,36,0,0,132,133,5,67,0,0,133,134,5,79,0,0,134,135,5,85,0,0,135,136,5,78,0,0,136,137,5,84,0,0,137,32,1,0,0,0,138,139,5,36,0,0,139,140,5,67,0,0,140,141,5,79,0,0,141,142,5,85,0,0,142,143,5,78,0,0,143,144,5,84,0,0,144,145,5,95,0,0,145,146,5,67,0,0,146,147,5,79,0,0,147,148,5,77,0,0,148,149,5,80,0,0,149,150,5,76,0,0,150,151,5,69,0,0,151,152,5,88,0,0,152,34,1,0,0,0,153,154,5,36,0,0,154,155,5,68,0,0,155,156,5,73,0,0,156,157,5,83,0,0,157,158,5,84,0,0,158,159,5,73,0,0,159,160,5,78,0,0,160,161,5,67,0,0,161,162,5,84,0,0,162,36,1,0,0,0,163,164,5,105,0,0,164,165,5,109,0,0,165,166,5,112,0,0,166,167,5,97,0,0,167,168,5,99,0,0,168,169,5,116,0,0,169,170,5,83,0,0,170,171,5,105,0,0,171,172,5,100,0,0,172,173,5,101,0,0,173,174,5,115,0,0,174,38,1,0,0,0,175,176,5,36,0,0,176,177,5,65,0,0,177,178,5,78,0,0,178,179,5,68,0,0,179,40,1,0,0,0,180,181,5,36,0,0,181,182,5,79,0,0,182,183,5,82,0,0,183,42,1,0,0,0,184,185,5,62,0,0,185,44,1,0,0,0,186,187,5,62,0,0,187,188,5,61,0,0,188,46,1,0,0,0,189,190,5,60,0,0,190,48,1,0,0,0,191,192,5,60,0,0,192,193,5,61,0,0,193,50,1,0,0,0,194,195,5,61,0,0,195,52,1,0,0,0,196,197,5,40,0,0,197,54,1,0,0,0,198,199,5,41,0,0,199,56,1,0,0,0,200,201,7,0,0,0,201,58,1,0,0,0,202,204,5,45,0,0,203,202,1,0,0,0,203,204,1,0,0,0,204,206,1,0,0,0,205,207,3,71,35,0,206,205,1,0,0,0,207,208,1,0,0,0,208,206,1,0,0,0,208,209,1,0,0,0,209,60,1,0,0,0,210,211,3,59,29,0,211,212,5,46,0,0,212,213,3,59,29,0,213,62,1,0,0,0,214,217,3,59,29,0,215,217,3,61,30,0,216,214,1,0,0,0,216,215,1,0,0,0,217,218,1,0,0,0,218,219,7,1,0,0,219,64,1,0,0,0,220,223,3,69,34,0,221,223,3,71,35,0,222,220,1,0,0,0,222,221,1,0,0,0,223,229,1,0,0,0,224,228,3,69,34,0,225,228,3,71,35,0,226,228,5,95,0,0,227,224,1,0,0,0,227,225,1,0,0,0,227,226,1,0,0,0,228,231,1,0,0,0,229,227,1,0,0,0,229,230,1,0,0,0,230,66,1,0,0,0,231,229,1,0,0,0,232,234,7,2,0,0,233,232,1,0,0,0,234,235,1,0,0,0,235,233,1,0,0,0,235,236,1,0,0,0,236,237,1,0,0,0,237,238,6,33,0,0,238,68,1,0,0,0,239,240,7,3,0,0,240,70,1,0,0,0,241,242,7,4,0,0,242,72,1,0,0,0,8,0,203,208,216,222,227,229,235,1,6,0,0]),u=h.decisionToState.map(((e,i)=>new t.dfa.DFA(e,i)));class c extends t.Lexer{static grammarFileName="T6Trigger.g4";static channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"];static modeNames=["DEFAULT_MODE"];static literalNames=[null,"'\\u0024'","'-'","'/'","'\\u00B0'","'\\u002B'","'\\u0025'","'\\u0026'","'.'","'$IF'","'$FROM'","'$THEN'","'$ANY'","'$EMPTY'","'$NOT'","'$COMPLEX'","'$COUNT'","'$COUNT_COMPLEX'","'$DISTINCT'","'impactSides'","'$AND'","'$OR'","'>'","'>='","'<'","'<='","'='","'('","')'"];static symbolicNames=[null,null,null,null,null,null,null,null,null,"IF","FROM","THEN","ANY","EMPTY","NOT","COMPLEX","COUNT","COUNT_COMPLEX","DISTINCT","IMPACT_SIDES","AND","OR","GT","GE","LT","LE","EQ","LPAREN","RPAREN","SEPARATOR","INT","DECIMAL","DATE_TIME","IDENTIFIER","WS"];static ruleNames=["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","IF","FROM","THEN","ANY","EMPTY","NOT","COMPLEX","COUNT","COUNT_COMPLEX","DISTINCT","IMPACT_SIDES","AND","OR","GT","GE","LT","LE","EQ","LPAREN","RPAREN","SEPARATOR","INT","DECIMAL","DATE_TIME","IDENTIFIER","WS","LETTER","DIGIT"];constructor(e){super(e),this._interp=new t.atn.LexerATNSimulator(this,h,u,new t.PredictionContextCache)}get atn(){return h}}c.EOF=t.Token.EOF,c.T__0=1,c.T__1=2,c.T__2=3,c.T__3=4,c.T__4=5,c.T__5=6,c.T__6=7,c.T__7=8,c.IF=9,c.FROM=10,c.THEN=11,c.ANY=12,c.EMPTY=13,c.NOT=14,c.COMPLEX=15,c.COUNT=16,c.COUNT_COMPLEX=17,c.DISTINCT=18,c.IMPACT_SIDES=19,c.AND=20,c.OR=21,c.GT=22,c.GE=23,c.LT=24,c.LE=25,c.EQ=26,c.LPAREN=27,c.RPAREN=28,c.SEPARATOR=29,c.INT=30,c.DECIMAL=31,c.DATE_TIME=32,c.IDENTIFIER=33,c.WS=34;class p extends t.tree.ParseTreeVisitor{visitParse(t){return this.visitChildren(t)}visitNumbersExpr(t){return this.visitChildren(t)}visitComparatorExpr(t){return this.visitChildren(t)}visitComplexExpr(t){return this.visitChildren(t)}visitNumberExpr(t){return this.visitChildren(t)}visitBinaryExpr(t){return this.visitChildren(t)}visitParenExpr(t){return this.visitChildren(t)}visitCountExpr(t){return this.visitChildren(t)}visitNotExpr(t){return this.visitChildren(t)}visitCountComplexExpr(t){return this.visitChildren(t)}visitValueExpr(t){return this.visitChildren(t)}visitEmptyExpr(t){return this.visitChildren(t)}visitVehicleImpactExpr(t){return this.visitChildren(t)}visitValuesExpr(t){return this.visitChildren(t)}visitAnyExpr(t){return this.visitChildren(t)}visitDateTime(t){return this.visitChildren(t)}visitVehicleImpact(t){return this.visitChildren(t)}visitNumber(t){return this.visitChildren(t)}visitNumbers(t){return this.visitChildren(t)}visitField(t){return this.visitChildren(t)}visitOp(t){return this.visitChildren(t)}visitComparator(t){return this.visitChildren(t)}visitBinary(t){return this.visitChildren(t)}visitNot(t){return this.visitChildren(t)}visitComplex(t){return this.visitChildren(t)}visitCount(t){return this.visitChildren(t)}visitCountComplex(t){return this.visitChildren(t)}visitValue(t){return this.visitChildren(t)}visitValues(t){return this.visitChildren(t)}}const d=(new t.atn.ATNDeserializer).deserialize([4,1,34,211,2,0,7,0,2,1,7,1,2,2,7,2,2,3,7,3,2,4,7,4,2,5,7,5,2,6,7,6,2,7,7,7,2,8,7,8,2,9,7,9,2,10,7,10,2,11,7,11,2,12,7,12,2,13,7,13,2,14,7,14,2,15,7,15,1,0,1,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,3,1,113,8,1,1,1,1,1,1,1,1,1,5,1,119,8,1,10,1,12,1,122,9,1,1,2,1,2,1,3,1,3,1,3,1,3,1,4,1,4,1,5,1,5,1,5,5,5,135,8,5,10,5,12,5,138,9,5,1,6,1,6,1,7,1,7,1,8,1,8,1,8,3,8,147,8,8,1,9,1,9,1,10,1,10,1,10,1,10,3,10,155,8,10,1,10,1,10,1,11,1,11,1,11,1,11,1,11,1,12,1,12,1,12,1,12,3,12,168,8,12,1,12,1,12,1,12,1,13,1,13,1,13,1,13,1,13,1,13,1,13,3,13,180,8,13,1,13,1,13,1,13,1,14,1,14,1,14,1,14,1,14,1,14,1,14,1,14,1,14,1,14,1,14,1,14,1,14,5,14,198,8,14,10,14,12,14,201,9,14,1,15,1,15,1,15,5,15,206,8,15,10,15,12,15,209,9,15,1,15,3,136,199,207,1,2,16,0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,0,4,1,0,30,31,1,0,22,26,1,0,20,21,3,0,1,1,9,21,29,29,226,0,32,1,0,0,0,2,112,1,0,0,0,4,123,1,0,0,0,6,125,1,0,0,0,8,129,1,0,0,0,10,131,1,0,0,0,12,139,1,0,0,0,14,141,1,0,0,0,16,143,1,0,0,0,18,148,1,0,0,0,20,150,1,0,0,0,22,158,1,0,0,0,24,163,1,0,0,0,26,172,1,0,0,0,28,199,1,0,0,0,30,202,1,0,0,0,32,33,3,2,1,0,33,34,5,0,0,1,34,1,1,0,0,0,35,36,6,1,-1,0,36,37,5,9,0,0,37,38,3,16,8,0,38,39,5,10,0,0,39,40,3,12,6,0,40,41,5,11,0,0,41,113,1,0,0,0,42,43,5,9,0,0,43,44,5,12,0,0,44,45,5,10,0,0,45,46,3,12,6,0,46,47,5,11,0,0,47,113,1,0,0,0,48,49,5,9,0,0,49,50,5,13,0,0,50,51,5,10,0,0,51,52,3,12,6,0,52,53,5,11,0,0,53,113,1,0,0,0,54,55,5,9,0,0,55,56,3,8,4,0,56,57,5,10,0,0,57,58,3,12,6,0,58,59,5,11,0,0,59,113,1,0,0,0,60,61,5,9,0,0,61,62,3,10,5,0,62,63,5,10,0,0,63,64,3,12,6,0,64,65,5,11,0,0,65,113,1,0,0,0,66,67,5,9,0,0,67,68,3,20,10,0,68,69,5,10,0,0,69,70,3,12,6,0,70,71,5,11,0,0,71,113,1,0,0,0,72,73,5,9,0,0,73,74,3,22,11,0,74,75,5,10,0,0,75,76,3,12,6,0,76,77,5,11,0,0,77,113,1,0,0,0,78,79,5,9,0,0,79,80,3,24,12,0,80,81,5,10,0,0,81,82,3,12,6,0,82,83,5,11,0,0,83,113,1,0,0,0,84,85,5,9,0,0,85,86,3,26,13,0,86,87,5,10,0,0,87,88,3,12,6,0,88,89,5,11,0,0,89,113,1,0,0,0,90,91,5,27,0,0,91,92,3,2,1,0,92,93,5,28,0,0,93,113,1,0,0,0,94,95,5,9,0,0,95,96,3,6,3,0,96,97,5,10,0,0,97,98,3,12,6,0,98,99,5,11,0,0,99,113,1,0,0,0,100,101,5,9,0,0,101,102,3,28,14,0,102,103,5,10,0,0,103,104,3,12,6,0,104,105,5,11,0,0,105,113,1,0,0,0,106,107,5,9,0,0,107,108,3,30,15,0,108,109,5,10,0,0,109,110,3,12,6,0,110,111,5,11,0,0,111,113,1,0,0,0,112,35,1,0,0,0,112,42,1,0,0,0,112,48,1,0,0,0,112,54,1,0,0,0,112,60,1,0,0,0,112,66,1,0,0,0,112,72,1,0,0,0,112,78,1,0,0,0,112,84,1,0,0,0,112,90,1,0,0,0,112,94,1,0,0,0,112,100,1,0,0,0,112,106,1,0,0,0,113,120,1,0,0,0,114,115,10,14,0,0,115,116,3,18,9,0,116,117,3,2,1,15,117,119,1,0,0,0,118,114,1,0,0,0,119,122,1,0,0,0,120,118,1,0,0,0,120,121,1,0,0,0,121,3,1,0,0,0,122,120,1,0,0,0,123,124,5,32,0,0,124,5,1,0,0,0,125,126,5,19,0,0,126,127,5,26,0,0,127,128,5,30,0,0,128,7,1,0,0,0,129,130,7,0,0,0,130,9,1,0,0,0,131,136,3,8,4,0,132,133,5,29,0,0,133,135,3,8,4,0,134,132,1,0,0,0,135,138,1,0,0,0,136,137,1,0,0,0,136,134,1,0,0,0,137,11,1,0,0,0,138,136,1,0,0,0,139,140,5,33,0,0,140,13,1,0,0,0,141,142,7,1,0,0,142,15,1,0,0,0,143,146,3,14,7,0,144,147,3,8,4,0,145,147,3,4,2,0,146,144,1,0,0,0,146,145,1,0,0,0,147,17,1,0,0,0,148,149,7,2,0,0,149,19,1,0,0,0,150,151,5,14,0,0,151,154,5,27,0,0,152,155,3,10,5,0,153,155,3,30,15,0,154,152,1,0,0,0,154,153,1,0,0,0,155,156,1,0,0,0,156,157,5,28,0,0,157,21,1,0,0,0,158,159,5,15,0,0,159,160,5,27,0,0,160,161,3,2,1,0,161,162,5,28,0,0,162,23,1,0,0,0,163,164,5,16,0,0,164,167,5,27,0,0,165,168,5,18,0,0,166,168,3,28,14,0,167,165,1,0,0,0,167,166,1,0,0,0,168,169,1,0,0,0,169,170,5,28,0,0,170,171,3,16,8,0,171,25,1,0,0,0,172,173,5,17,0,0,173,179,5,27,0,0,174,180,3,2,1,0,175,176,5,18,0,0,176,177,3,12,6,0,177,178,3,2,1,0,178,180,1,0,0,0,179,174,1,0,0,0,179,175,1,0,0,0,180,181,1,0,0,0,181,182,5,28,0,0,182,183,3,16,8,0,183,27,1,0,0,0,184,198,8,3,0,0,185,198,3,8,4,0,186,198,3,14,7,0,187,198,5,33,0,0,188,198,5,27,0,0,189,198,5,28,0,0,190,198,5,2,0,0,191,198,5,3,0,0,192,198,5,4,0,0,193,198,5,5,0,0,194,198,5,6,0,0,195,198,5,7,0,0,196,198,5,8,0,0,197,184,1,0,0,0,197,185,1,0,0,0,197,186,1,0,0,0,197,187,1,0,0,0,197,188,1,0,0,0,197,189,1,0,0,0,197,190,1,0,0,0,197,191,1,0,0,0,197,192,1,0,0,0,197,193,1,0,0,0,197,194,1,0,0,0,197,195,1,0,0,0,197,196,1,0,0,0,198,201,1,0,0,0,199,200,1,0,0,0,199,197,1,0,0,0,200,29,1,0,0,0,201,199,1,0,0,0,202,207,3,28,14,0,203,204,5,29,0,0,204,206,3,28,14,0,205,203,1,0,0,0,206,209,1,0,0,0,207,208,1,0,0,0,207,205,1,0,0,0,208,31,1,0,0,0,209,207,1,0,0,0,10,112,120,136,146,154,167,179,197,199,207]),f=d.decisionToState.map(((e,i)=>new t.dfa.DFA(e,i))),T=new t.PredictionContextCache;class x extends t.Parser{static grammarFileName="java-escape";static literalNames=[null,"'\\u0024'","'-'","'/'","'\\u00B0'","'\\u002B'","'\\u0025'","'\\u0026'","'.'","'$IF'","'$FROM'","'$THEN'","'$ANY'","'$EMPTY'","'$NOT'","'$COMPLEX'","'$COUNT'","'$COUNT_COMPLEX'","'$DISTINCT'","'impactSides'","'$AND'","'$OR'","'>'","'>='","'<'","'<='","'='","'('","')'"];static symbolicNames=[null,null,null,null,null,null,null,null,null,"IF","FROM","THEN","ANY","EMPTY","NOT","COMPLEX","COUNT","COUNT_COMPLEX","DISTINCT","IMPACT_SIDES","AND","OR","GT","GE","LT","LE","EQ","LPAREN","RPAREN","SEPARATOR","INT","DECIMAL","DATE_TIME","IDENTIFIER","WS"];static ruleNames=["parse","expr","dateTime","vehicleImpact","number","numbers","field","op","comparator","binary","not","complex","count","countComplex","value","values"];constructor(e){super(e),this._interp=new t.atn.ParserATNSimulator(this,d,f,T),this.ruleNames=x.ruleNames,this.literalNames=x.literalNames,this.symbolicNames=x.symbolicNames}get atn(){return d}sempred(t,e,i){if(1===e)return this.expr_sempred(t,i);throw"No predicate with index:"+e}expr_sempred(t,e){if(0===e)return this.precpred(this._ctx,14);throw"No predicate with index:"+e}parse(){let e=new E(this,this._ctx,this.state);this.enterRule(e,0,x.RULE_parse);try{this.enterOuterAlt(e,1),this.state=32,this.expr(0),this.state=33,this.match(x.EOF)}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}expr(e){void 0===e&&(e=0);const i=this._ctx,r=this.state;let n=new m(this,this._ctx,r),s=n;this.enterRecursionRule(n,2,x.RULE_expr,e);try{switch(this.enterOuterAlt(n,1),this.state=112,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,0,this._ctx)){case 1:n=new y(this,n),this._ctx=n,s=n,this.state=36,this.match(x.IF),this.state=37,this.comparator(),this.state=38,this.match(x.FROM),this.state=39,this.field(),this.state=40,this.match(x.THEN);break;case 2:n=new L(this,n),this._ctx=n,s=n,this.state=42,this.match(x.IF),this.state=43,this.match(x.ANY),this.state=44,this.match(x.FROM),this.state=45,this.field(),this.state=46,this.match(x.THEN);break;case 3:n=new F(this,n),this._ctx=n,s=n,this.state=48,this.match(x.IF),this.state=49,this.match(x.EMPTY),this.state=50,this.match(x.FROM),this.state=51,this.field(),this.state=52,this.match(x.THEN);break;case 4:n=new C(this,n),this._ctx=n,s=n,this.state=54,this.match(x.IF),this.state=55,this.number(),this.state=56,this.match(x.FROM),this.state=57,this.field(),this.state=58,this.match(x.THEN);break;case 5:n=new v(this,n),this._ctx=n,s=n,this.state=60,this.match(x.IF),this.state=61,this.numbers(),this.state=62,this.match(x.FROM),this.state=63,this.field(),this.state=64,this.match(x.THEN);break;case 6:n=new I(this,n),this._ctx=n,s=n,this.state=66,this.match(x.IF),this.state=67,this.not(),this.state=68,this.match(x.FROM),this.state=69,this.field(),this.state=70,this.match(x.THEN);break;case 7:n=new R(this,n),this._ctx=n,s=n,this.state=72,this.match(x.IF),this.state=73,this.complex(),this.state=74,this.match(x.FROM),this.state=75,this.field(),this.state=76,this.match(x.THEN);break;case 8:n=new N(this,n),this._ctx=n,s=n,this.state=78,this.match(x.IF),this.state=79,this.count(),this.state=80,this.match(x.FROM),this.state=81,this.field(),this.state=82,this.match(x.THEN);break;case 9:n=new k(this,n),this._ctx=n,s=n,this.state=84,this.match(x.IF),this.state=85,this.countComplex(),this.state=86,this.match(x.FROM),this.state=87,this.field(),this.state=88,this.match(x.THEN);break;case 10:n=new _(this,n),this._ctx=n,s=n,this.state=90,this.match(x.LPAREN),this.state=91,this.expr(0),this.state=92,this.match(x.RPAREN);break;case 11:n=new O(this,n),this._ctx=n,s=n,this.state=94,this.match(x.IF),this.state=95,this.vehicleImpact(),this.state=96,this.match(x.FROM),this.state=97,this.field(),this.state=98,this.match(x.THEN);break;case 12:n=new A(this,n),this._ctx=n,s=n,this.state=100,this.match(x.IF),this.state=101,this.value(),this.state=102,this.match(x.FROM),this.state=103,this.field(),this.state=104,this.match(x.THEN);break;case 13:n=new P(this,n),this._ctx=n,s=n,this.state=106,this.match(x.IF),this.state=107,this.values(),this.state=108,this.match(x.FROM),this.state=109,this.field(),this.state=110,this.match(x.THEN)}this._ctx.stop=this._input.LT(-1),this.state=120,this._errHandler.sync(this);for(var o=this._interp.adaptivePredict(this._input,1,this._ctx);2!=o&&o!=t.atn.ATN.INVALID_ALT_NUMBER;){if(1===o){if(null!==this._parseListeners&&this.triggerExitRuleEvent(),s=n,n=new g(this,new m(this,i,r)),this.pushNewRecursionContext(n,2,x.RULE_expr),this.state=114,!this.precpred(this._ctx,14))throw new t.error.FailedPredicateException(this,"this.precpred(this._ctx, 14)");this.state=115,this.binary(),this.state=116,this.expr(15)}this.state=122,this._errHandler.sync(this),o=this._interp.adaptivePredict(this._input,1,this._ctx)}}catch(e){if(!(e instanceof t.error.RecognitionException))throw e;n.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.unrollRecursionContexts(i)}return n}dateTime(){let e=new w(this,this._ctx,this.state);this.enterRule(e,4,x.RULE_dateTime);try{this.enterOuterAlt(e,1),this.state=123,this.match(x.DATE_TIME)}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}vehicleImpact(){let e=new b(this,this._ctx,this.state);this.enterRule(e,6,x.RULE_vehicleImpact);try{this.enterOuterAlt(e,1),this.state=125,this.match(x.IMPACT_SIDES),this.state=126,this.match(x.EQ),this.state=127,this.match(x.INT)}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}number(){let e=new S(this,this._ctx,this.state);this.enterRule(e,8,x.RULE_number);var i=0;try{this.enterOuterAlt(e,1),this.state=129,30!==(i=this._input.LA(1))&&31!==i?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}numbers(){let e=new M(this,this._ctx,this.state);this.enterRule(e,10,x.RULE_numbers);try{this.enterOuterAlt(e,1),this.state=131,this.number(),this.state=136,this._errHandler.sync(this);for(var i=this._interp.adaptivePredict(this._input,2,this._ctx);1!=i&&i!=t.atn.ATN.INVALID_ALT_NUMBER;)2===i&&(this.state=132,this.match(x.SEPARATOR),this.state=133,this.number()),this.state=138,this._errHandler.sync(this),i=this._interp.adaptivePredict(this._input,2,this._ctx)}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}field(){let e=new V(this,this._ctx,this.state);this.enterRule(e,12,x.RULE_field);try{this.enterOuterAlt(e,1),this.state=139,this.match(x.IDENTIFIER)}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}op(){let e=new H(this,this._ctx,this.state);this.enterRule(e,14,x.RULE_op);var i=0;try{this.enterOuterAlt(e,1),this.state=141,0!=(-32&(i=this._input.LA(1)))||0==(1<<i&130023424)?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}comparator(){let e=new D(this,this._ctx,this.state);this.enterRule(e,16,x.RULE_comparator);try{switch(this.enterOuterAlt(e,1),this.state=143,this.op(),this.state=146,this._errHandler.sync(this),this._input.LA(1)){case 30:case 31:this.state=144,this.number();break;case 32:this.state=145,this.dateTime();break;default:throw new t.error.NoViableAltException(this)}}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}binary(){let e=new U(this,this._ctx,this.state);this.enterRule(e,18,x.RULE_binary);var i=0;try{this.enterOuterAlt(e,1),this.state=148,20!==(i=this._input.LA(1))&&21!==i?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume())}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}not(){let e=new Y(this,this._ctx,this.state);this.enterRule(e,20,x.RULE_not);try{switch(this.enterOuterAlt(e,1),this.state=150,this.match(x.NOT),this.state=151,this.match(x.LPAREN),this.state=154,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,4,this._ctx)){case 1:this.state=152,this.numbers();break;case 2:this.state=153,this.values()}this.state=156,this.match(x.RPAREN)}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}complex(){let e=new X(this,this._ctx,this.state);this.enterRule(e,22,x.RULE_complex);try{this.enterOuterAlt(e,1),this.state=158,this.match(x.COMPLEX),this.state=159,this.match(x.LPAREN),this.state=160,this.expr(0),this.state=161,this.match(x.RPAREN)}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}count(){let e=new $(this,this._ctx,this.state);this.enterRule(e,24,x.RULE_count);try{switch(this.enterOuterAlt(e,1),this.state=163,this.match(x.COUNT),this.state=164,this.match(x.LPAREN),this.state=167,this._errHandler.sync(this),this._input.LA(1)){case 18:this.state=165,this.match(x.DISTINCT);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 30:case 31:case 32:case 33:case 34:this.state=166,this.value();break;default:throw new t.error.NoViableAltException(this)}this.state=169,this.match(x.RPAREN),this.state=170,this.comparator()}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}countComplex(){let e=new B(this,this._ctx,this.state);this.enterRule(e,26,x.RULE_countComplex);try{switch(this.enterOuterAlt(e,1),this.state=172,this.match(x.COUNT_COMPLEX),this.state=173,this.match(x.LPAREN),this.state=179,this._errHandler.sync(this),this._input.LA(1)){case 9:case 27:this.state=174,this.expr(0);break;case 18:this.state=175,this.match(x.DISTINCT),this.state=176,this.field(),this.state=177,this.expr(0);break;default:throw new t.error.NoViableAltException(this)}this.state=181,this.match(x.RPAREN),this.state=182,this.comparator()}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}value(){let e=new G(this,this._ctx,this.state);this.enterRule(e,28,x.RULE_value);var i=0;try{this.enterOuterAlt(e,1),this.state=199,this._errHandler.sync(this);for(var r=this._interp.adaptivePredict(this._input,8,this._ctx);1!=r&&r!=t.atn.ATN.INVALID_ALT_NUMBER;){if(2===r)switch(this.state=197,this._errHandler.sync(this),this._interp.adaptivePredict(this._input,7,this._ctx)){case 1:this.state=184,(i=this._input.LA(1))<=0||0==(-32&i)&&0!=(1<<i&541064706)?this._errHandler.recoverInline(this):(this._errHandler.reportMatch(this),this.consume());break;case 2:this.state=185,this.number();break;case 3:this.state=186,this.op();break;case 4:this.state=187,this.match(x.IDENTIFIER);break;case 5:this.state=188,this.match(x.LPAREN);break;case 6:this.state=189,this.match(x.RPAREN);break;case 7:this.state=190,this.match(x.T__1);break;case 8:this.state=191,this.match(x.T__2);break;case 9:this.state=192,this.match(x.T__3);break;case 10:this.state=193,this.match(x.T__4);break;case 11:this.state=194,this.match(x.T__5);break;case 12:this.state=195,this.match(x.T__6);break;case 13:this.state=196,this.match(x.T__7)}this.state=201,this._errHandler.sync(this),r=this._interp.adaptivePredict(this._input,8,this._ctx)}}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}values(){let e=new j(this,this._ctx,this.state);this.enterRule(e,30,x.RULE_values);try{this.enterOuterAlt(e,1),this.state=202,this.value(),this.state=207,this._errHandler.sync(this);for(var i=this._interp.adaptivePredict(this._input,9,this._ctx);1!=i&&i!=t.atn.ATN.INVALID_ALT_NUMBER;)2===i&&(this.state=203,this.match(x.SEPARATOR),this.state=204,this.value()),this.state=209,this._errHandler.sync(this),i=this._interp.adaptivePredict(this._input,9,this._ctx)}catch(i){if(!(i instanceof t.error.RecognitionException))throw i;e.exception=i,this._errHandler.reportError(this,i),this._errHandler.recover(this,i)}finally{this.exitRule()}return e}}x.EOF=t.Token.EOF,x.T__0=1,x.T__1=2,x.T__2=3,x.T__3=4,x.T__4=5,x.T__5=6,x.T__6=7,x.T__7=8,x.IF=9,x.FROM=10,x.THEN=11,x.ANY=12,x.EMPTY=13,x.NOT=14,x.COMPLEX=15,x.COUNT=16,x.COUNT_COMPLEX=17,x.DISTINCT=18,x.IMPACT_SIDES=19,x.AND=20,x.OR=21,x.GT=22,x.GE=23,x.LT=24,x.LE=25,x.EQ=26,x.LPAREN=27,x.RPAREN=28,x.SEPARATOR=29,x.INT=30,x.DECIMAL=31,x.DATE_TIME=32,x.IDENTIFIER=33,x.WS=34,x.RULE_parse=0,x.RULE_expr=1,x.RULE_dateTime=2,x.RULE_vehicleImpact=3,x.RULE_number=4,x.RULE_numbers=5,x.RULE_field=6,x.RULE_op=7,x.RULE_comparator=8,x.RULE_binary=9,x.RULE_not=10,x.RULE_complex=11,x.RULE_count=12,x.RULE_countComplex=13,x.RULE_value=14,x.RULE_values=15;class E extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_parse}expr(){return this.getTypedRuleContext(m,0)}EOF(){return this.getToken(x.EOF,0)}accept(t){return t instanceof p?t.visitParse(this):t.visitChildren(this)}}class m extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_expr}copyFrom(t){super.copyFrom(t)}}class v extends m{constructor(t,e){super(t),super.copyFrom(e)}IF(){return this.getToken(x.IF,0)}numbers(){return this.getTypedRuleContext(M,0)}FROM(){return this.getToken(x.FROM,0)}field(){return this.getTypedRuleContext(V,0)}THEN(){return this.getToken(x.THEN,0)}accept(t){return t instanceof p?t.visitNumbersExpr(this):t.visitChildren(this)}}x.NumbersExprContext=v;class y extends m{constructor(t,e){super(t),super.copyFrom(e)}IF(){return this.getToken(x.IF,0)}comparator(){return this.getTypedRuleContext(D,0)}FROM(){return this.getToken(x.FROM,0)}field(){return this.getTypedRuleContext(V,0)}THEN(){return this.getToken(x.THEN,0)}accept(t){return t instanceof p?t.visitComparatorExpr(this):t.visitChildren(this)}}x.ComparatorExprContext=y;class R extends m{constructor(t,e){super(t),super.copyFrom(e)}IF(){return this.getToken(x.IF,0)}complex(){return this.getTypedRuleContext(X,0)}FROM(){return this.getToken(x.FROM,0)}field(){return this.getTypedRuleContext(V,0)}THEN(){return this.getToken(x.THEN,0)}accept(t){return t instanceof p?t.visitComplexExpr(this):t.visitChildren(this)}}x.ComplexExprContext=R;class C extends m{constructor(t,e){super(t),super.copyFrom(e)}IF(){return this.getToken(x.IF,0)}number(){return this.getTypedRuleContext(S,0)}FROM(){return this.getToken(x.FROM,0)}field(){return this.getTypedRuleContext(V,0)}THEN(){return this.getToken(x.THEN,0)}accept(t){return t instanceof p?t.visitNumberExpr(this):t.visitChildren(this)}}x.NumberExprContext=C;class g extends m{constructor(t,e){super(t),super.copyFrom(e)}expr=function(t){return void 0===t&&(t=null),null===t?this.getTypedRuleContexts(m):this.getTypedRuleContext(m,t)};binary(){return this.getTypedRuleContext(U,0)}accept(t){return t instanceof p?t.visitBinaryExpr(this):t.visitChildren(this)}}x.BinaryExprContext=g;class _ extends m{constructor(t,e){super(t),super.copyFrom(e)}LPAREN(){return this.getToken(x.LPAREN,0)}expr(){return this.getTypedRuleContext(m,0)}RPAREN(){return this.getToken(x.RPAREN,0)}accept(t){return t instanceof p?t.visitParenExpr(this):t.visitChildren(this)}}x.ParenExprContext=_;class N extends m{constructor(t,e){super(t),super.copyFrom(e)}IF(){return this.getToken(x.IF,0)}count(){return this.getTypedRuleContext($,0)}FROM(){return this.getToken(x.FROM,0)}field(){return this.getTypedRuleContext(V,0)}THEN(){return this.getToken(x.THEN,0)}accept(t){return t instanceof p?t.visitCountExpr(this):t.visitChildren(this)}}x.CountExprContext=N;class I extends m{constructor(t,e){super(t),super.copyFrom(e)}IF(){return this.getToken(x.IF,0)}not(){return this.getTypedRuleContext(Y,0)}FROM(){return this.getToken(x.FROM,0)}field(){return this.getTypedRuleContext(V,0)}THEN(){return this.getToken(x.THEN,0)}accept(t){return t instanceof p?t.visitNotExpr(this):t.visitChildren(this)}}x.NotExprContext=I;class k extends m{constructor(t,e){super(t),super.copyFrom(e)}IF(){return this.getToken(x.IF,0)}countComplex(){return this.getTypedRuleContext(B,0)}FROM(){return this.getToken(x.FROM,0)}field(){return this.getTypedRuleContext(V,0)}THEN(){return this.getToken(x.THEN,0)}accept(t){return t instanceof p?t.visitCountComplexExpr(this):t.visitChildren(this)}}x.CountComplexExprContext=k;class A extends m{constructor(t,e){super(t),super.copyFrom(e)}IF(){return this.getToken(x.IF,0)}value(){return this.getTypedRuleContext(G,0)}FROM(){return this.getToken(x.FROM,0)}field(){return this.getTypedRuleContext(V,0)}THEN(){return this.getToken(x.THEN,0)}accept(t){return t instanceof p?t.visitValueExpr(this):t.visitChildren(this)}}x.ValueExprContext=A;class F extends m{constructor(t,e){super(t),super.copyFrom(e)}IF(){return this.getToken(x.IF,0)}EMPTY(){return this.getToken(x.EMPTY,0)}FROM(){return this.getToken(x.FROM,0)}field(){return this.getTypedRuleContext(V,0)}THEN(){return this.getToken(x.THEN,0)}accept(t){return t instanceof p?t.visitEmptyExpr(this):t.visitChildren(this)}}x.EmptyExprContext=F;class O extends m{constructor(t,e){super(t),super.copyFrom(e)}IF(){return this.getToken(x.IF,0)}vehicleImpact(){return this.getTypedRuleContext(b,0)}FROM(){return this.getToken(x.FROM,0)}field(){return this.getTypedRuleContext(V,0)}THEN(){return this.getToken(x.THEN,0)}accept(t){return t instanceof p?t.visitVehicleImpactExpr(this):t.visitChildren(this)}}x.VehicleImpactExprContext=O;class P extends m{constructor(t,e){super(t),super.copyFrom(e)}IF(){return this.getToken(x.IF,0)}values(){return this.getTypedRuleContext(j,0)}FROM(){return this.getToken(x.FROM,0)}field(){return this.getTypedRuleContext(V,0)}THEN(){return this.getToken(x.THEN,0)}accept(t){return t instanceof p?t.visitValuesExpr(this):t.visitChildren(this)}}x.ValuesExprContext=P;class L extends m{constructor(t,e){super(t),super.copyFrom(e)}IF(){return this.getToken(x.IF,0)}ANY(){return this.getToken(x.ANY,0)}FROM(){return this.getToken(x.FROM,0)}field(){return this.getTypedRuleContext(V,0)}THEN(){return this.getToken(x.THEN,0)}accept(t){return t instanceof p?t.visitAnyExpr(this):t.visitChildren(this)}}x.AnyExprContext=L;class w extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_dateTime}DATE_TIME(){return this.getToken(x.DATE_TIME,0)}accept(t){return t instanceof p?t.visitDateTime(this):t.visitChildren(this)}}class b extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_vehicleImpact}IMPACT_SIDES(){return this.getToken(x.IMPACT_SIDES,0)}EQ(){return this.getToken(x.EQ,0)}INT(){return this.getToken(x.INT,0)}accept(t){return t instanceof p?t.visitVehicleImpact(this):t.visitChildren(this)}}class S extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_number}INT(){return this.getToken(x.INT,0)}DECIMAL(){return this.getToken(x.DECIMAL,0)}accept(t){return t instanceof p?t.visitNumber(this):t.visitChildren(this)}}class M extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_numbers}number=function(t){return void 0===t&&(t=null),null===t?this.getTypedRuleContexts(S):this.getTypedRuleContext(S,t)};SEPARATOR=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.SEPARATOR):this.getToken(x.SEPARATOR,t)};accept(t){return t instanceof p?t.visitNumbers(this):t.visitChildren(this)}}class V extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_field}IDENTIFIER(){return this.getToken(x.IDENTIFIER,0)}accept(t){return t instanceof p?t.visitField(this):t.visitChildren(this)}}class H extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_op}GT(){return this.getToken(x.GT,0)}GE(){return this.getToken(x.GE,0)}LT(){return this.getToken(x.LT,0)}LE(){return this.getToken(x.LE,0)}EQ(){return this.getToken(x.EQ,0)}accept(t){return t instanceof p?t.visitOp(this):t.visitChildren(this)}}class D extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_comparator}op(){return this.getTypedRuleContext(H,0)}number(){return this.getTypedRuleContext(S,0)}dateTime(){return this.getTypedRuleContext(w,0)}accept(t){return t instanceof p?t.visitComparator(this):t.visitChildren(this)}}class U extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_binary}AND(){return this.getToken(x.AND,0)}OR(){return this.getToken(x.OR,0)}accept(t){return t instanceof p?t.visitBinary(this):t.visitChildren(this)}}class Y extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_not}NOT(){return this.getToken(x.NOT,0)}LPAREN(){return this.getToken(x.LPAREN,0)}RPAREN(){return this.getToken(x.RPAREN,0)}numbers(){return this.getTypedRuleContext(M,0)}values(){return this.getTypedRuleContext(j,0)}accept(t){return t instanceof p?t.visitNot(this):t.visitChildren(this)}}class X extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_complex}COMPLEX(){return this.getToken(x.COMPLEX,0)}LPAREN(){return this.getToken(x.LPAREN,0)}expr(){return this.getTypedRuleContext(m,0)}RPAREN(){return this.getToken(x.RPAREN,0)}accept(t){return t instanceof p?t.visitComplex(this):t.visitChildren(this)}}class $ extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_count}COUNT(){return this.getToken(x.COUNT,0)}LPAREN(){return this.getToken(x.LPAREN,0)}RPAREN(){return this.getToken(x.RPAREN,0)}comparator(){return this.getTypedRuleContext(D,0)}DISTINCT(){return this.getToken(x.DISTINCT,0)}value(){return this.getTypedRuleContext(G,0)}accept(t){return t instanceof p?t.visitCount(this):t.visitChildren(this)}}class B extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_countComplex}COUNT_COMPLEX(){return this.getToken(x.COUNT_COMPLEX,0)}LPAREN(){return this.getToken(x.LPAREN,0)}RPAREN(){return this.getToken(x.RPAREN,0)}comparator(){return this.getTypedRuleContext(D,0)}expr(){return this.getTypedRuleContext(m,0)}DISTINCT(){return this.getToken(x.DISTINCT,0)}field(){return this.getTypedRuleContext(V,0)}accept(t){return t instanceof p?t.visitCountComplex(this):t.visitChildren(this)}}class G extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_value}number=function(t){return void 0===t&&(t=null),null===t?this.getTypedRuleContexts(S):this.getTypedRuleContext(S,t)};op=function(t){return void 0===t&&(t=null),null===t?this.getTypedRuleContexts(H):this.getTypedRuleContext(H,t)};IDENTIFIER=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.IDENTIFIER):this.getToken(x.IDENTIFIER,t)};LPAREN=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.LPAREN):this.getToken(x.LPAREN,t)};RPAREN=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.RPAREN):this.getToken(x.RPAREN,t)};SEPARATOR=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.SEPARATOR):this.getToken(x.SEPARATOR,t)};IF=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.IF):this.getToken(x.IF,t)};FROM=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.FROM):this.getToken(x.FROM,t)};THEN=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.THEN):this.getToken(x.THEN,t)};ANY=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.ANY):this.getToken(x.ANY,t)};EMPTY=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.EMPTY):this.getToken(x.EMPTY,t)};NOT=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.NOT):this.getToken(x.NOT,t)};COMPLEX=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.COMPLEX):this.getToken(x.COMPLEX,t)};COUNT=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.COUNT):this.getToken(x.COUNT,t)};COUNT_COMPLEX=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.COUNT_COMPLEX):this.getToken(x.COUNT_COMPLEX,t)};DISTINCT=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.DISTINCT):this.getToken(x.DISTINCT,t)};IMPACT_SIDES=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.IMPACT_SIDES):this.getToken(x.IMPACT_SIDES,t)};AND=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.AND):this.getToken(x.AND,t)};OR=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.OR):this.getToken(x.OR,t)};accept(t){return t instanceof p?t.visitValue(this):t.visitChildren(this)}}class j extends t.ParserRuleContext{constructor(t,e,i){void 0===e&&(e=null),null==i&&(i=-1),super(e,i),this.parser=t,this.ruleIndex=x.RULE_values}value=function(t){return void 0===t&&(t=null),null===t?this.getTypedRuleContexts(G):this.getTypedRuleContext(G,t)};SEPARATOR=function(t){return void 0===t&&(t=null),null===t?this.getTokens(x.SEPARATOR):this.getToken(x.SEPARATOR,t)};accept(t){return t instanceof p?t.visitValues(this):t.visitChildren(this)}}var Q,q;x.ParseContext=E,x.ExprContext=m,x.DateTimeContext=w,x.VehicleImpactContext=b,x.NumberContext=S,x.NumbersContext=M,x.FieldContext=V,x.OpContext=H,x.ComparatorContext=D,x.BinaryContext=U,x.NotContext=Y,x.ComplexContext=X,x.CountContext=$,x.CountComplexContext=B,x.ValueContext=G,x.ValuesContext=j,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.ParseContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.ExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.NumbersExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.ComparatorExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.ComplexExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.NumberExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.BinaryExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.ParenExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.CountExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.NotExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.CountComplexExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.ValueExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.EmptyExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.VehicleImpactExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.ValuesExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.AnyExprContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.DateTimeContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.VehicleImpactContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.NumberContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.NumbersContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.FieldContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.OpContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.ComparatorContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.BinaryContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.NotContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.ComplexContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.CountContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.CountComplexContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.ValueContext),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r(e,t)}(x.ValuesContext),function(t){t.string="string",t.enum="enum",t.integer="integer",t.timestamp="timestamp",t.complex="complex",t.decimal="decimal",t.enum_list="enum_list",t.injury="injury",t.user="user",t.image="image",t.user_list="user_list",t.icd="icd",t.ais="ais",t.custom="custom",t.vehicleImpactType="vehicleImpactType",t.address="address"}(Q||(Q={})),function(t){t.LEXER="Lexer",t.PARSER="Parser",t.EVALUATE_VISITOR="EvaluateConditionVisitor"}(q||(q={}));var z,W=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.clearInstance=function(){e.instance=null},e.prototype.isLexer=function(t){return t instanceof c},e.prototype.syntaxError=function(t,e,i,r,n,s){var o=this.isLexer(t)?q.LEXER:q.PARSER;this.report=new a({message:n,source:o,line:i,column:r,recognizer:t,offendingSymbol:e,e:s})},e}(t.error.ErrorListener),K=t.InputStream,J=function(t){var e=new K(t,!0),i=new c(e);i.removeErrorListeners();var r=W.getInstance();i.addErrorListener(r),this.lexer=i},Z=t.CommonTokenStream,tt=function(t){var e=t.lexer,i=new Z(e),r=new x(i);r.buildParseTrees=!0,r.removeErrorListeners();var n=W.getInstance();r.addErrorListener(n),this.parser=r,this.ast=r.parse(),this.error=n.report,W.clearInstance()},et=function(t){function e(){var e=t.call(this)||this;return e.fieldNamesSet=new Set,e}return r(e,t),e.prototype.visitParse=function(e){return t.prototype.visit.call(this,e.expr()),null},e.prototype.visitValueExpr=function(t){return this.fieldNamesSet.add(t.field().getText()),null},e.prototype.visitValuesExpr=function(t){return this.fieldNamesSet.add(t.field().getText()),null},e.prototype.visitComparatorExpr=function(t){return this.fieldNamesSet.add(t.field().getText()),null},e.prototype.visitAnyExpr=function(t){return this.fieldNamesSet.add(t.field().getText()),null},e.prototype.visitEmptyExpr=function(e){return this.fieldNamesSet.add(e.field().getText()),t.prototype.visitEmptyExpr.call(this,e)},e.prototype.visitNotExpr=function(t){return this.fieldNamesSet.add(t.field().getText()),null},e.prototype.visitNumberExpr=function(t){return this.fieldNamesSet.add(t.field().getText()),null},e.prototype.visitBinaryExpr=function(e){return t.prototype.visit.call(this,e.expr(0)),t.prototype.visit.call(this,e.expr(1)),null},e.prototype.visitNumbersExpr=function(t){return this.fieldNamesSet.add(t.field().getText()),null},e.prototype.visitParenExpr=function(e){return t.prototype.visit.call(this,e.expr()),null},e.prototype.visitComplexExpr=function(e){return this.fieldNamesSet.add(e.field().getText()),t.prototype.visit.call(this,e.complex().expr()),null},e.prototype.visitCountExpr=function(t){return this.fieldNamesSet.add(t.field().getText()),null},e.prototype.visitCountComplexExpr=function(e){return this.fieldNamesSet.add(e.field().getText()),null!==e.countComplex().DISTINCT()&&this.fieldNamesSet.add(e.countComplex().field().getText()),t.prototype.visit.call(this,e.countComplex().expr()),null},e.prototype.visitVehicleImpactExpr=function(t){return this.fieldNamesSet.add(t.field().getText()),null},Object.defineProperty(e.prototype,"fieldNames",{get:function(){return this.fieldNamesSet},enumerable:!1,configurable:!0}),e}(p);!function(t){t.D="d",t.M="m",t.Y="y"}(z||(z={}));var it=function(t){function i(e){var i=t.call(this)||this;return i.fieldTokensScope={},i.evaluationResult=!1,i.triggeredFieldTokens=null,i.setFieldTokensScope(e),i}return r(i,t),i.prototype.setFieldTokensScope=function(t){this.isArray(t)?this.fieldTokensScope=function t(e,i){var r,n;void 0===i&&(i={});try{for(var a=s(e),h=a.next();!h.done;h=a.next()){var u=h.value;i[u.fieldName]=i[u.fieldName]?l(l([],o(i[u.fieldName]),!1),[u],!1):[u],u.fieldType===Q.complex&&t(u.children,i)}}catch(t){r={error:t}}finally{try{h&&!h.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}(t):this.fieldTokensScope=n({},t)},i.prototype.checkFieldType=function(t,e){if(!t.every((function(t){return e.includes(t.fieldType)})))throw new Error("Incorrect model type for [".concat(t[0].fieldName,"]: actual - [").concat(t[0].fieldType,"], requested - [").concat(e.join("|"),"]"))},i.prototype.getRelevantFieldTokens=function(t){var e=this.fieldTokensScope[t];return e&&e.length>0?e:null},i.prototype.getConditionValue=function(t){var e=t.start.source[1];if(!e)throw new Error("InputStream is missing in TokenSourceTuple");return e.getText(t.start.start,t.stop.stop)},i.prototype.truthifyResult=function(t,e){if(t){var i=n({},t);return i.triggeredFieldTokens=i.triggeredFieldTokens.add(e),i}return{evaluationResult:!0,triggeredFieldTokens:(new Set).add(e)}},i.prototype.dateTimeValueParse=function(t){var e=t.match(/^[1-9]\d*/),i=t.match(/[a-z]+$/i),r=e?e[0]:e,n=i?i[0].toLowerCase():i;switch(n){case"day":case"days":n=z.D;break;case"month":case"months":n=z.M;break;case"year":case"years":n=z.Y}return{value:r,unit:n}},i.prototype.dateTimeValueConverter=function(t,e,i,r){var n=Number(e),s=Number(r);return t===i?{tokenValue:n,conditionValue:s}:t===z.D&&i===z.M?{tokenValue:n/30,conditionValue:s}:t===z.D&&i===z.Y?{tokenValue:n/360,conditionValue:s}:t===z.M&&i===z.D?{tokenValue:30*n,conditionValue:s}:t===z.M&&i===z.Y?{tokenValue:n/12,conditionValue:s}:t===z.Y&&i===z.D?{tokenValue:360*n,conditionValue:s}:t===z.Y&&i===z.M?{tokenValue:12*n,conditionValue:s}:void 0},i.prototype.compare=function(t,e,i){return t.GT()?e>i:t.GE()?e>=i:t.LT()?e<i:t.LE()?e<=i:!!t.EQ()&&e===i},i.prototype.isTruthy=function(t){return null!==t},i.prototype.isTokenValueEmpty=function(t){var e=t.fieldType,i=t.fieldValue;switch(e){case Q.complex:return void 0===i;case Q.decimal:case Q.integer:case Q.timestamp:return null===i;case Q.ais:case Q.enum:case Q.string:return""===i;case Q.enum_list:try{return 0===i.length}catch(t){throw new Error("Check the value for the enum_list type field. It must be like array literal - []")}case Q.image:try{return i.hasOwnProperty("images")&&0===i.images.length}catch(t){throw new Error("Check the value for the image type field. It must be like this object literal - { images: [] }")}case Q.vehicleImpactType:try{return 0===Object.keys(i).length}catch(t){throw new Error("Check the value for the vehicleImpactType field. It must be like object literal - {}")}default:throw new Error("Check the fieldType for the value")}},i.prototype.isTokenValuesEqual=function(t,i){var r,s,o,l;if(t.fieldType!==i.fieldType)throw new Error("Field types must be equal");switch(t.fieldType){case Q.ais:case Q.enum:case Q.string:case Q.decimal:case Q.integer:return t.fieldValue===i.fieldValue;case Q.timestamp:try{return null===t.fieldValue||null===i.fieldValue?t.fieldValue===i.fieldValue:t.fieldValue.getTime()===i.fieldValue.getTime()}catch(t){throw new Error("Check the value for the timestamp type. It must be Date type")}case Q.enum_list:try{var a=t.fieldValue,h=i.fieldValue;return this.isArraysEqual(a,h)}catch(t){throw new Error("Check the value for the enum_list type field. It must be like array literal - []")}case Q.image:try{var u=t.fieldValue,c=i.fieldValue;return e(u,c)}catch(t){throw new Error("Check the value for the image type field. It must be like this object literal - { images: [] }")}case Q.vehicleImpactType:try{var p=n({},t.fieldValue);delete p.passengerPositions,delete p.impactSides;var d=n({},i.fieldValue);return delete d.passengerPositions,delete d.impactSides,!!e(p,d)&&(this.isArraysEqual(null!==(r=t.fieldValue.passengerPositions)&&void 0!==r?r:[],null!==(s=i.fieldValue.passengerPositions)&&void 0!==s?s:[])&&this.isArraysEqual(null!==(o=t.fieldValue.impactSides)&&void 0!==o?o:[],null!==(l=i.fieldValue.impactSides)&&void 0!==l?l:[]))}catch(t){throw new Error("Check the value for the vehicleImpactType field. It must be like object literal - {}")}default:throw new Error("Check the fieldType for the value")}},i.prototype.isArray=function(t){return Array.isArray(t)},i.prototype.isArraysEqual=function(t,e){return t.length===e.length&&t.every((function(t){return e.includes(t)}))},i.prototype.isNumeric=function(t){return t.fieldType===Q.integer||t.fieldType===Q.decimal},i.prototype.isString=function(t){return t.fieldType===Q.ais||t.fieldType===Q.enum||t.fieldType===Q.string},i.prototype.isEnumList=function(t){return t.fieldType===Q.enum_list},i.prototype.visitParse=function(e){try{var i=t.prototype.visit.call(this,e.expr());if(i){var r=i.evaluationResult,n=i.triggeredFieldTokens;this.evaluationResult=r,this.triggeredFieldTokens=n}}catch(t){throw t}},i.prototype.visitBinaryExpr=function(e){var i=null,r=t.prototype.visit.call(this,e.expr(0)),n=t.prototype.visit.call(this,e.expr(1));return!!e.binary().OR()?this.isTruthy(r)&&this.isTruthy(n)?i={evaluationResult:!0,triggeredFieldTokens:new Set(l(l([],o(r.triggeredFieldTokens),!1),o(n.triggeredFieldTokens),!1))}:this.isTruthy(r)?r:this.isTruthy(n)?n:i:this.isTruthy(r)&&this.isTruthy(n)?i={evaluationResult:!0,triggeredFieldTokens:new Set(l(l([],o(r.triggeredFieldTokens),!1),o(n.triggeredFieldTokens),!1))}:i},i.prototype.visitComparatorExpr=function(t){var e,i,r=null,n=t.field().getText(),o=this.getRelevantFieldTokens(n);if(!o)return r;var l=[Q.string,Q.integer,Q.decimal];this.checkFieldType(o,l);var a=t.comparator().number()?this.getConditionValue(t.comparator().number()):this.getConditionValue(t.comparator().dateTime()),h=t.comparator().op();try{for(var u=s(o),c=u.next();!c.done;c=u.next()){var p=c.value;if(this.isString(p)){var d=this.dateTimeValueParse(p.fieldValue),f=d.value,T=d.unit,x=this.dateTimeValueParse(a),E=x.value,m=x.unit;if(null!==f&&null!==T&&null!==E&&null!==m){var v=this.dateTimeValueConverter(T,f,m,E);if(v){var y=v.tokenValue,R=v.conditionValue;this.compare(h,y,R)&&(r=this.truthifyResult(r,p))}}}else this.isNumeric(p)&&null!==p.fieldValue&&this.compare(h,p.fieldValue,Number(a))&&(r=this.truthifyResult(r,p))}}catch(t){e={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return r},i.prototype.visitAnyExpr=function(t){var e,i,r=null,n=t.field().getText(),o=this.getRelevantFieldTokens(n);if(!o)return r;try{for(var l=s(o),a=l.next();!a.done;a=l.next()){var h=a.value;this.isTokenValueEmpty(h)||(r=this.truthifyResult(r,h))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(i=l.return)&&i.call(l)}finally{if(e)throw e.error}}return r},i.prototype.visitEmptyExpr=function(t){var e,i,r=null,n=t.field().getText(),o=this.getRelevantFieldTokens(n);if(!o)return r;try{for(var l=s(o),a=l.next();!a.done;a=l.next()){var h=a.value;this.isTokenValueEmpty(h)&&(r=this.truthifyResult(r,h))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(i=l.return)&&i.call(l)}finally{if(e)throw e.error}}return r},i.prototype.visitNumberExpr=function(t){var e,i,r=null,n=t.field().getText(),o=this.getRelevantFieldTokens(n);if(!o)return r;var l=[Q.ais,Q.integer,Q.decimal];this.checkFieldType(o,l);var a=this.getConditionValue(t.number());try{for(var h=s(o),u=h.next();!u.done;u=h.next()){var c=u.value;(this.isString(c)&&c.fieldValue===a||this.isNumeric(c)&&null!==c.fieldValue&&c.fieldValue===Number(a))&&(r=this.truthifyResult(r,c))}}catch(t){e={error:t}}finally{try{u&&!u.done&&(i=h.return)&&i.call(h)}finally{if(e)throw e.error}}return r},i.prototype.visitNumbersExpr=function(t){var e,i,r=this,n=null,o=t.field().getText(),l=this.getRelevantFieldTokens(o);if(!l)return n;var a=[Q.ais,Q.integer,Q.decimal];this.checkFieldType(l,a);var h=t.numbers().number().map((function(t){return r.getConditionValue(t)}));try{for(var u=s(l),c=u.next();!c.done;c=u.next()){var p=c.value;(this.isString(p)&&h.includes(p.fieldValue)||this.isNumeric(p)&&null!==p.fieldValue&&h.includes(String(p.fieldValue)))&&(n=this.truthifyResult(n,p))}}catch(t){e={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return n},i.prototype.visitNotExpr=function(t){var e,i,r=this,n=null,o=t.field().getText(),l=this.getRelevantFieldTokens(o);if(!l)return n;var a=[Q.ais,Q.integer,Q.decimal,Q.string,Q.enum,Q.enum_list];this.checkFieldType(l,a);var h=t.not().numbers()?t.not().numbers().number().map((function(t){return r.getConditionValue(t)})):t.not().values().value().map((function(t){return r.getConditionValue(t).toLowerCase()})),u=function(t){if(c.isString(t)&&!h.includes(t.fieldValue.toLowerCase()))n=c.truthifyResult(n,t);else if(c.isNumeric(t)&&!h.includes(String(t.fieldValue)))n=c.truthifyResult(n,t);else if(c.isEnumList(t)){var e=t.fieldValue.map((function(t){return t.toLowerCase()}));h.every((function(t){return!e.includes(t)}))&&(n=c.truthifyResult(n,t))}},c=this;try{for(var p=s(l),d=p.next();!d.done;d=p.next()){u(d.value)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(e)throw e.error}}return n},i.prototype.visitComplexExpr=function(e){return t.prototype.visit.call(this,e.complex().expr())},i.prototype.visitCountExpr=function(t){var e,i,r=null,n=t.field().getText(),o=this.getRelevantFieldTokens(n);if(!o)return r;var l=[Q.string,Q.enum];this.checkFieldType(o,l);var a=t.count().value()?this.getConditionValue(t.count().value()):null,h=t.count().comparator().op(),u=this.getConditionValue(t.count().comparator().number()),c=a?o.filter((function(t){return t.fieldValue===a})):o.reduce((function(t,e){return t.every((function(t){return t.fieldValue!==e.fieldValue}))&&t.push(e),t}),[]);if(this.compare(h,c.length,Number(u)))try{for(var p=s(c),d=p.next();!d.done;d=p.next()){var f=d.value;r=this.truthifyResult(r,f)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(e)throw e.error}}return r},i.prototype.visitCountComplexExpr=function(e){var i,r,n,a,h=this,u=null,c=e.field().getText(),p=this.getRelevantFieldTokens(c);if(!p)return u;var d=[Q.complex];this.checkFieldType(p,d);var f=e.countComplex().comparator().op(),T=this.getConditionValue(e.countComplex().comparator().number()),x=e.countComplex().DISTINCT()?e.countComplex().field().getText():null,E=[],m=[],v=0,y=this.fieldTokensScope;try{t:for(var R=s(p),C=R.next();!C.done;C=R.next()){var g=C.value;this.setFieldTokensScope(g.children);var _=t.prototype.visit.call(this,e.countComplex().expr());if(this.isTruthy(_)&&x){var N=[],I=function(t){if(t.fieldName===x&&E.some((function(e){return h.isTokenValuesEqual(e,t)})))return"continue-parentLoop";t.fieldName===x?(E.push(t),N.push(t)):N.push(t)};try{for(var k=(n=void 0,s(_.triggeredFieldTokens)),A=k.next();!A.done;A=k.next()){if("continue-parentLoop"===I(A.value))continue t}}catch(t){n={error:t}}finally{try{A&&!A.done&&(a=k.return)&&a.call(k)}finally{if(n)throw n.error}}N.length>0&&(v++,m=l(l([],o(m),!1),o(N),!1))}else this.isTruthy(_)&&(v++,m=l(l([],o(m),!1),o(_.triggeredFieldTokens),!1))}}catch(t){i={error:t}}finally{try{C&&!C.done&&(r=R.return)&&r.call(R)}finally{if(i)throw i.error}}return this.setFieldTokensScope(y),this.compare(f,v,Number(T))?u={evaluationResult:!0,triggeredFieldTokens:new Set(m)}:u},i.prototype.visitParenExpr=function(e){return t.prototype.visit.call(this,e.expr())},i.prototype.visitVehicleImpactExpr=function(t){var e,i,r,n=null,o=t.field().getText(),l=this.getRelevantFieldTokens(o);if(!l)return n;var a=[Q.vehicleImpactType];this.checkFieldType(l,a);var h=t.vehicleImpact().INT().getText();try{for(var u=s(l),c=u.next();!c.done;c=u.next()){var p=c.value;(null===(r=p.fieldValue.impactSides)||void 0===r?void 0:r.includes(Number(h)))&&(n=this.truthifyResult(n,p))}}catch(t){e={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(e)throw e.error}}return n},i.prototype.visitValueExpr=function(t){var e,i,r=null,n=t.field().getText(),o=this.getRelevantFieldTokens(n);if(!o)return r;var l=[Q.string,Q.enum,Q.enum_list];this.checkFieldType(o,l);var a=this.getConditionValue(t.value());try{for(var h=s(o),u=h.next();!u.done;u=h.next()){var c=u.value;if(this.isEnumList(c))c.fieldValue.map((function(t){return t.toLowerCase()})).includes(a.toLowerCase())&&(r=this.truthifyResult(r,c));else this.isString(c)&&c.fieldValue.toLowerCase()===a.toLowerCase()&&(r=this.truthifyResult(r,c))}}catch(t){e={error:t}}finally{try{u&&!u.done&&(i=h.return)&&i.call(h)}finally{if(e)throw e.error}}return r},i.prototype.visitValuesExpr=function(t){var e,i,r=this,n=null,o=t.field().getText(),l=this.getRelevantFieldTokens(o);if(!l)return n;var a=[Q.string,Q.enum,Q.enum_list];this.checkFieldType(l,a);var h=t.values().value().map((function(t){return r.getConditionValue(t).toLowerCase()})),u=function(t){if(c.isEnumList(t)){var e=t.fieldValue.map((function(t){return t.toLowerCase()}));h.some((function(t){return e.includes(t)}))&&(n=c.truthifyResult(n,t))}else c.isString(t)&&h.includes(t.fieldValue.toLowerCase())&&(n=c.truthifyResult(n,t))},c=this;try{for(var p=s(l),d=p.next();!d.done;d=p.next()){u(d.value)}}catch(t){e={error:t}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(e)throw e.error}}return n},i}(p),rt=function(){function t(t){var e;this.withCache=!0,this.cachedParse={},t&&(this.withCache=null===(e=t.withCache)||void 0===e||e,this.onError=t.onError),this.checkCondition=this.checkCondition.bind(this),this.getFieldEntries=this.getFieldEntries.bind(this),this.evaluateFieldTokens=this.evaluateFieldTokens.bind(this),this.clearCache=this.clearCache.bind(this)}return t.prototype.getParseResult=function(t){if(this.cachedParse[t])return this.cachedParse[t];var e=new J(t),i=new tt(e),r=i.ast,n=i.error;return this.withCache&&(this.cachedParse[t]={ast:r,error:n}),{ast:r,error:n}},t.prototype.isError=function(t,e,i){return!!t&&(this.onError&&this.onError(t,e,i),!0)},t.prototype.checkCondition=function(t,e){return void 0===e&&(e=!1),this.withCache=e,this.getParseResult(t).error},t.prototype.getFieldEntries=function(t){var e=t.condition,i=t.conditionOwnerId,r=this.getParseResult(e),n=r.ast,s=r.error;if(this.isError(s,e,i))return null;var o=new et;return n.accept(o),o.fieldNames},t.prototype.evaluateFieldTokens=function(t){var e=t.condition,i=t.fieldTokens,r=t.conditionOwnerId,n=this.getParseResult(e),s=n.ast,o=n.error;if(this.isError(o,e,r))return null;try{var l=new it(i);return s.accept(l),{evaluationResult:l.evaluationResult,triggeredFieldTokens:l.triggeredFieldTokens}}catch(t){var h=t.message,u=new a({message:h,source:q.EVALUATE_VISITOR});return this.onError&&this.onError(u,e,r),null}},t.prototype.clearCache=function(){this.cachedParse={}},t}(),nt=function(t,e,i,r,n,s){void 0===e&&(e=""),void 0===s&&(s=[]),this.id=t,this.parentId=e,this.fieldName=i,this.fieldValue=r,this.fieldType=n,this.children=s};export{rt as CoLang,a as CoLangError,q as ESource,nt as FieldTokenModel};
